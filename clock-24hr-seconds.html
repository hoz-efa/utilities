<!DOCTYPE html>
<html style="height:100%; margin:0; padding:0">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<title>Clock</title>
		<link rel="icon" type="image/svg+xml" href="favicon.svg" />
		<style type="text/css">
			/* Customizable font and colors */
			html {
				background: #000000;
				font-family: sans-serif;
				font-weight: bold;
				color: #FFFFFF;
			}
			
			/* Fullscreen button styles */
			.fullscreen-btn {
				position: fixed;
				top: 20px;
				right: 20px;
				width: 40px;
				height: 40px;
				background: rgba(255, 255, 255, 0.1);
				border: 2px solid rgba(255, 255, 255, 0.3);
				border-radius: 8px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.3s ease;
				z-index: 1000;
			}
			
			.fullscreen-btn:hover {
				background: rgba(255, 255, 255, 0.2);
				border-color: rgba(255, 255, 255, 0.5);
			}
			
			.fullscreen-btn::before {
				content: "⛶";
				font-size: 20px;
				color: #fff;
			}
			
			.fullscreen-btn.fullscreen::before {
				content: "⛶";
			}
			
			/* Cursor hiding in fullscreen */
			.hide-cursor {
				cursor: none !important;
			}
			
			.hide-cursor * {
				cursor: none !important;
			}
			
			/* Hide fullscreen button in fullscreen mode */
			.hide-cursor .fullscreen-btn {
				opacity: 0;
				pointer-events: none;
				transition: opacity 0.3s ease;
			}
		</style>
	</head>
	
	<body style="display:flex; height:100%; margin:0; padding:0; justify-content:center; align-items:center">
		<div class="fullscreen-btn" id="fullscreenBtn" title="Toggle Fullscreen"></div>
		<span id="clocktext" style="font-kerning:none"></span>
		
		<script>
			"use strict";
			
			let textElem = document.getElementById("clocktext");
			const targetWidth = 0.9;  // Proportion of full screen width
			let curFontSize = 20;  // Do not change
			
			function updateClock() {
				const d = new Date();
				let s = "";
				s += (10 > d.getHours  () ? "0" : "") + d.getHours  () + ":";
				s += (10 > d.getMinutes() ? "0" : "") + d.getMinutes() + ":";
				s += (10 > d.getSeconds() ? "0" : "") + d.getSeconds();
				textElem.textContent = s;
				setTimeout(updateClock, 1000 - d.getTime() % 1000 + 20);
			}
			
			function updateTextSize() {
				for (let i = 0; 3 > i; i++) {  // Iterate for better better convergence
					curFontSize *= targetWidth / (textElem.offsetWidth / textElem.parentNode.offsetWidth);
					textElem.style.fontSize = curFontSize + "pt";
				}
			}
			
			// Fullscreen functionality
			const fullscreenBtn = document.getElementById('fullscreenBtn');
			let cursorTimeout;
			let isFullscreen = false;

			function toggleFullscreen() {
				if (!document.fullscreenElement) {
					document.documentElement.requestFullscreen().then(() => {
						isFullscreen = true;
						fullscreenBtn.classList.add('fullscreen');
						startCursorTimer();
					}).catch(err => {
						console.log('Error attempting to enable fullscreen:', err);
					});
				} else {
					document.exitFullscreen().then(() => {
						isFullscreen = false;
						fullscreenBtn.classList.remove('fullscreen');
						clearCursorTimer();
						document.body.classList.remove('hide-cursor');
					}).catch(err => {
						console.log('Error attempting to exit fullscreen:', err);
					});
				}
			}

			function startCursorTimer() {
				clearCursorTimer();
				cursorTimeout = setTimeout(() => {
					if (isFullscreen) {
						document.body.classList.add('hide-cursor');
					}
				}, 5000);
			}

			function clearCursorTimer() {
				if (cursorTimeout) {
					clearTimeout(cursorTimeout);
					cursorTimeout = null;
				}
			}

			// Event listeners
			fullscreenBtn.addEventListener('click', toggleFullscreen);
			
			document.addEventListener('fullscreenchange', () => {
				if (!document.fullscreenElement) {
					isFullscreen = false;
					fullscreenBtn.classList.remove('fullscreen');
					clearCursorTimer();
					document.body.classList.remove('hide-cursor');
				}
			});

			// Show cursor on mouse movement in fullscreen
			document.addEventListener('mousemove', () => {
				if (isFullscreen) {
					document.body.classList.remove('hide-cursor');
					startCursorTimer();
				}
			});

			// Show cursor on any interaction in fullscreen
			document.addEventListener('click', () => {
				if (isFullscreen) {
					document.body.classList.remove('hide-cursor');
					startCursorTimer();
				}
			});

			document.addEventListener('keydown', () => {
				if (isFullscreen) {
					document.body.classList.remove('hide-cursor');
					startCursorTimer();
				}
			});
			
			updateClock();
			updateTextSize();
			window.addEventListener("resize", updateTextSize);
		</script>
	</body>
</html>
